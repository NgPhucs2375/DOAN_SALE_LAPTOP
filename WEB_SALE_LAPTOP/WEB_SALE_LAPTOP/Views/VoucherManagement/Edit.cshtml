@model WEB_SALE_LAPTOP.Models.VOUCHER
@{
    ViewBag.Title = "Chỉnh sửa chiến dịch: " + Model.MAVOUCHER;
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@using (Html.BeginForm("Edit", "VoucherManagement", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    @Html.HiddenFor(model => model.MAVOUCHER)
    @Html.HiddenFor(model => model.DA_DUNG)

    <div class="page-header">
        <h2 class="section-title">
            <a href="@Url.Action("Index")" style="text-decoration: none; color: var(--text-muted); margin-right: 10px;">
                <i class="fa-solid fa-arrow-left"></i>
            </a>
            Cập nhật Voucher
        </h2>
        <button type="submit" class="btn-primary-admin">
            <i class="fa-solid fa-save"></i> Lưu Thay Đổi
        </button>
    </div>

    <div class="form-row-2col" style="grid-template-columns: 2fr 1fr; gap: 2rem; align-items: start;">

        <div class="admin-card">
            <div class="admin-card-header"><i class="fa-solid fa-ticket"></i> Thông tin khuyến mãi</div>

            <div class="form-group">
                @Html.LabelFor(model => model.TEN_VOUCHER, "Tên chiến dịch / Mô tả")
                @Html.EditorFor(model => model.TEN_VOUCHER, new { htmlAttributes = new { @class = "form-group-input", placeholder = "VD: Sale Tết 2025 - Giảm 10%" } })
                @Html.ValidationMessageFor(model => model.TEN_VOUCHER, "", new { @class = "text-danger" })
            </div>

            <div class="form-row-2col">
                <div class="form-group">
                    @Html.LabelFor(model => model.LOAI_GIAMGIA, "Loại giảm giá")
                    @Html.DropDownListFor(model => model.LOAI_GIAMGIA, new List<SelectListItem>
                    {
                        new SelectListItem { Text = "Phần trăm (%)", Value = "PHANTRAM" },
                        new SelectListItem { Text = "Tiền mặt (VNĐ)", Value = "TIENMAT" }
                    }, new { @class = "form-group-input" })
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.GIATRI, "Giá trị giảm")
                    @Html.EditorFor(model => model.GIATRI, new { htmlAttributes = new { @class = "form-group-input", type = "number" } })
                    @Html.ValidationMessageFor(model => model.GIATRI, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-row-2col">
                <div class="form-group">
                    @Html.LabelFor(model => model.DONHANG_TOITHIEU, "Đơn tối thiểu (VNĐ)")
                    @Html.EditorFor(model => model.DONHANG_TOITHIEU, new { htmlAttributes = new { @class = "form-group-input", type = "number" } })
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.GIAM_TOIDA, "Giảm tối đa (VNĐ - Nếu là %)")
                    @Html.EditorFor(model => model.GIAM_TOIDA, new { htmlAttributes = new { @class = "form-group-input", type = "number" } })
                </div>
            </div>
        </div>

        <div class="admin-card">
            <div class="admin-card-header"><i class="fa-solid fa-gear"></i> Thiết lập giới hạn</div>

            <div class="form-group">
                @Html.LabelFor(model => model.SOLUONG_DUNG, "Tổng số lượng phát hành")
                @Html.EditorFor(model => model.SOLUONG_DUNG, new { htmlAttributes = new { @class = "form-group-input", type = "number" } })
                @Html.ValidationMessageFor(model => model.SOLUONG_DUNG, "", new { @class = "text-danger" })
            </div>

            <div style="margin-bottom: 1.5rem; background: #f8f9fa; padding: 10px; border-radius: 6px; font-size: 0.9rem;">
                <span style="color: var(--text-muted);">Đã sử dụng:</span>
                <strong style="color: var(--color-primary);">@Model.DA_DUNG</strong> lượt
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.NGAYBATDAU, "Ngày bắt đầu")
                @Html.TextBoxFor(model => model.NGAYBATDAU, "{0:yyyy-MM-dd}", new { @class = "form-group-input", type = "date" })
                @Html.ValidationMessageFor(model => model.NGAYBATDAU, "", new { @class = "text-danger" })
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.NGAYKETTHUC, "Ngày kết thúc")
                @Html.TextBoxFor(model => model.NGAYKETTHUC, "{0:yyyy-MM-dd}", new { @class = "form-group-input", type = "date" })
                @Html.ValidationMessageFor(model => model.NGAYKETTHUC, "", new { @class = "text-danger" })
            </div>
        </div>
    </div>
}